{"version":3,"file":"gallery.js","sources":["pages/gallery/gallery.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ2FsbGVyeS9nYWxsZXJ5LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"photo-box\">\r\n  \t<classify-meun :classify=\"classify\" @classifyEmit=\"handleClassify\"></classify-meun>\r\n\t\t<view v-for=\"(item, idx) in photosData\" :key=\"idx\">\r\n\t\t\t<image-library :photosData=\"item\"></image-library>\r\n\t\t</view>\r\n  \t\r\n  \t<div class=\"more-btn\" v-if=\"!isClassify\">\r\n  \t\t<button v-if=\"photosData.length < photosAllData.length\" class=\"more-button\" type=\"primary\"\r\n  \t\t\t@click=\"moreArticle\">\r\n  \t\t\t加载更多\r\n  \t\t</button>\r\n  \t\t<text v-else class=\"no-more-textg\"> 没有更多了 </text>\r\n  \t</div>\r\n  \t<div v-else class=\"more-btn\"></div>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, reactive, onMounted } from 'vue'\r\n\timport ImageLibrary from '@/pages/components/ImageLibrary.vue';\r\n\timport { getPhotoLibraryApi } from '@/http/photoLibrary';\r\n\timport ClassifyMeun from '@/pages/components/ClassifyMeun.vue';\r\n\timport _ from 'lodash'\r\n\t\r\n\tconst photosData = ref([])\r\n\tconst photosAllData = ref([])\r\n\tconst isClassify = ref(false)\r\n\tconst classify = reactive([{\r\n\t\tname: '全部',\r\n\t\tnumber: 0,\r\n\t}, ])\r\n\t// 加载更多文章\r\n\tconst moreArticle = () => {\r\n\t  photosData.value = photosAllData.value.slice(0, photosData.value.length + 6)\r\n\t}\r\n\t// 过滤分类\r\n\tconst handleClassify = (name) => {\r\n\t\tconsole.log(name)\r\n\t\tconst listData = _.cloneDeep(photosAllData.value)\r\n\t\tconsole.log(listData)\r\n\t\tconst filterData = listData.filter((item) => {\r\n\t\t\treturn item.category === name\r\n\t\t})\r\n\t\tif (name === '全部') {\r\n\t\t\tisClassify.value = false\r\n\t\t\tphotosData.value = listData.slice(0, 6)\r\n\t\t} else {\r\n\t\t\tisClassify.value = true\r\n\t\t\tphotosData.value = filterData\r\n\t\t}\r\n\t}\r\n\tconst getPhotoLibrary = async () => {\r\n\t\tconst result = await getPhotoLibraryApi({})\r\n\t\tconst res = result.data\r\n\t\tif(res.code == 200){\r\n\t\t\tphotosAllData.value = _.cloneDeep(res.data.list)\r\n\t\t\tphotosData.value = res.data.list\r\n\t\t\tclassify[0].number = res.data.pagination.total\r\n\t\t\tfor (const key in res.data.stats.categories) {\r\n\t\t\t\tclassify.push({\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tnumber: res.data.stats.categories[key],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tuni.showToast({\r\n\t\t\t       title: '网络错误',\r\n\t\t\t       icon: 'none',\r\n\t\t\t     });\r\n\t\t}\r\n\t}\r\n\t\r\n\tonMounted(() => {\r\n\t\tgetPhotoLibrary()\r\n\t})\r\n\t\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.photo-title {\r\n\t\tfont-size: 1rem;\r\n\t\tfont-weight: 600;\r\n\t\tpadding-left: 15px;\r\n\t}\r\n\t.more-button{\r\n\t\tmargin-top: 20px;\r\n\t\twidth: 60px;\r\n\t\theight: 34px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 0.8rem;\r\n\t}\r\n\t.no-more-textg {\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 20px 0;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/WebProject/MixBlogUniApp/pages/gallery/gallery.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni","_","getPhotoLibraryApi","onMounted"],"mappings":";;;;;;AAoBC,MAAM,eAAe,MAAW;AAEhC,MAAM,eAAe,MAAW;;;;AAGhC,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAC5B,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,WAAWC,cAAAA,SAAS,CAAC;AAAA,MAC1B,MAAM;AAAA,MACN,QAAQ;AAAA,IACV,EAAK;AAEJ,UAAM,cAAc,MAAM;AACxB,iBAAW,QAAQ,cAAc,MAAM,MAAM,GAAG,WAAW,MAAM,SAAS,CAAC;AAAA,IAC5E;AAED,UAAM,iBAAiB,CAAC,SAAS;AAChCC,oBAAAA,MAAY,MAAA,OAAA,mCAAA,IAAI;AAChB,YAAM,WAAWC,cAAC,EAAC,UAAU,cAAc,KAAK;AAChDD,oBAAAA,MAAY,MAAA,OAAA,mCAAA,QAAQ;AACpB,YAAM,aAAa,SAAS,OAAO,CAAC,SAAS;AAC5C,eAAO,KAAK,aAAa;AAAA,MAC5B,CAAG;AACD,UAAI,SAAS,MAAM;AAClB,mBAAW,QAAQ;AACnB,mBAAW,QAAQ,SAAS,MAAM,GAAG,CAAC;AAAA,MACzC,OAAS;AACN,mBAAW,QAAQ;AACnB,mBAAW,QAAQ;AAAA,MACnB;AAAA,IACD;AACD,UAAM,kBAAkB,YAAY;AACnC,YAAM,SAAS,MAAME,kBAAkB,mBAAC,EAAE;AAC1C,YAAM,MAAM,OAAO;AACnB,UAAG,IAAI,QAAQ,KAAI;AAClB,sBAAc,QAAQD,cAAC,EAAC,UAAU,IAAI,KAAK,IAAI;AAC/C,mBAAW,QAAQ,IAAI,KAAK;AAC5B,iBAAS,CAAC,EAAE,SAAS,IAAI,KAAK,WAAW;AACzC,mBAAW,OAAO,IAAI,KAAK,MAAM,YAAY;AAC5C,mBAAS,KAAK;AAAA,YACb,MAAM;AAAA,YACN,QAAQ,IAAI,KAAK,MAAM,WAAW,GAAG;AAAA,UAC1C,CAAK;AAAA,QACD;AAAA,MACJ,OAAQ;AACLD,sBAAAA,MAAI,UAAU;AAAA,UACP,OAAO;AAAA,UACP,MAAM;AAAA,QAChB,CAAS;AAAA,MACN;AAAA,IACD;AAEDG,kBAAAA,UAAU,MAAM;AACf,sBAAiB;AAAA,IACnB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EF,GAAG,WAAW,eAAe;"}