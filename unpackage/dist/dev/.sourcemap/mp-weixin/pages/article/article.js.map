{"version":3,"file":"article.js","sources":["pages/article/article.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYXJ0aWNsZS9hcnRpY2xlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"article-box\">\r\n\t\t<classify-meun :classify=\"classify\" @classifyEmit=\"handleClassify\"></classify-meun>\r\n\t\t<article-card :articleData=\"articleData\"></article-card>\r\n\t\t<div class=\"more-btn\" v-if=\"!isClassify\">\r\n\t\t\t<button v-if=\"articleData.data.length < articleData.deepData.length\" class=\"more-button\" type=\"primary\"\r\n\t\t\t\t@click=\"moreArticle\">\r\n\t\t\t\t加载更多\r\n\t\t\t</button>\r\n\t\t\t<text v-else class=\"no-more-textg\"> 没有更多了 </text>\r\n\t\t</div>\r\n\t\t<div v-else class=\"more-btn\"></div>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tonMounted\r\n\t} from 'vue'\r\n\timport ArticleCard from '@/pages/components/ArticleCard.vue';\r\n\timport ClassifyMeun from '@/pages/components/ClassifyMeun.vue';\r\n\timport {\r\n\t\tgetAllBlogArticleApi\r\n\t} from '@/http/blogArticle';\r\n\timport _ from 'lodash'\r\n\tconst isClassify = ref(false)\r\n\tconst articleData = reactive({\r\n\t\tdata: [],\r\n\t\tcolumns: 2,\r\n\t\tdeepData: [],\r\n\t})\r\n\tconst classify = reactive([{\r\n\t\tname: '全部',\r\n\t\tnumber: 0,\r\n\t}, ])\r\n\t// 加载更多文章\r\n\tconst moreArticle = () => {\r\n\t  articleData.data = articleData.deepData.slice(0, articleData.data.length + 6)\r\n\t}\r\n\t// 过滤分类\r\n\tconst handleClassify = (name) => {\r\n\t\tconst listData = _.cloneDeep(articleData.deepData)\r\n\t\tconst filterData = listData.filter((item) => {\r\n\t\t\treturn item.category === name\r\n\t\t})\r\n\t\tif (name === '全部') {\r\n\t\t\tisClassify.value = false\r\n\t\t\tarticleData.data = listData.slice(0, 6)\r\n\t\t} else {\r\n\t\t\tisClassify.value = true\r\n\t\t\tarticleData.data = filterData\r\n\t\t}\r\n\t}\r\n\t// 获取banner数据\r\n\tconst getArticleData = async () => {\r\n\t\tconst response = await getAllBlogArticleApi({})\r\n\t\tconst res = response.data\r\n\t\tif (res.code == 200) {\r\n\t\t\tconst listData = res.data.list.filter((item) => item.status === 'published')\r\n\t\t\tarticleData.deepData = _.cloneDeep(listData)\r\n\t\t\tclassify[0].number = res.data.pagination.total\r\n\t\t\tfor (const key in res.data.stats.categories) {\r\n\t\t\t\tclassify.push({\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tnumber: res.data.stats.categories[key],\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tarticleData.data = listData.slice(0, 6)\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '网络错误',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tonMounted(() => {\r\n\t\tgetArticleData()\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.article-box {\r\n\t\t.article-title {\r\n\t\t\tfont-size: 1rem;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tpadding-left: 15px;\r\n\t\t}\r\n\r\n\t\t.more-button {\r\n\t\t\tmargin-top: 20px;\r\n\t\t\twidth: 60px;\r\n\t\t\theight: 34px;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-size: 0.8rem;\r\n\t\t}\r\n\t}\r\n\r\n\t.no-more-textg {\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 20px;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/WebProject/MixBlogUniApp/pages/article/article.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","_","getAllBlogArticleApi","uni","onMounted"],"mappings":";;;;;;AAqBC,MAAM,cAAc,MAAW;AAC/B,MAAM,eAAe,MAAW;;;;AAKhC,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,cAAcC,cAAAA,SAAS;AAAA,MAC5B,MAAM,CAAE;AAAA,MACR,SAAS;AAAA,MACT,UAAU,CAAE;AAAA,IACd,CAAE;AACD,UAAM,WAAWA,cAAAA,SAAS,CAAC;AAAA,MAC1B,MAAM;AAAA,MACN,QAAQ;AAAA,IACV,EAAK;AAEJ,UAAM,cAAc,MAAM;AACxB,kBAAY,OAAO,YAAY,SAAS,MAAM,GAAG,YAAY,KAAK,SAAS,CAAC;AAAA,IAC7E;AAED,UAAM,iBAAiB,CAAC,SAAS;AAChC,YAAM,WAAWC,cAAC,EAAC,UAAU,YAAY,QAAQ;AACjD,YAAM,aAAa,SAAS,OAAO,CAAC,SAAS;AAC5C,eAAO,KAAK,aAAa;AAAA,MAC5B,CAAG;AACD,UAAI,SAAS,MAAM;AAClB,mBAAW,QAAQ;AACnB,oBAAY,OAAO,SAAS,MAAM,GAAG,CAAC;AAAA,MACzC,OAAS;AACN,mBAAW,QAAQ;AACnB,oBAAY,OAAO;AAAA,MACnB;AAAA,IACD;AAED,UAAM,iBAAiB,YAAY;AAClC,YAAM,WAAW,MAAMC,iBAAoB,qBAAC,EAAE;AAC9C,YAAM,MAAM,SAAS;AACrB,UAAI,IAAI,QAAQ,KAAK;AACpB,cAAM,WAAW,IAAI,KAAK,KAAK,OAAO,CAAC,SAAS,KAAK,WAAW,WAAW;AAC3E,oBAAY,WAAWD,gBAAE,UAAU,QAAQ;AAC3C,iBAAS,CAAC,EAAE,SAAS,IAAI,KAAK,WAAW;AACzC,mBAAW,OAAO,IAAI,KAAK,MAAM,YAAY;AAC5C,mBAAS,KAAK;AAAA,YACb,MAAM;AAAA,YACN,QAAQ,IAAI,KAAK,MAAM,WAAW,GAAG;AAAA,UAC1C,CAAK;AAAA,QACD;AACD,oBAAY,OAAO,SAAS,MAAM,GAAG,CAAC;AAAA,MACzC,OAAS;AACNE,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACD;AACDC,kBAAAA,UAAU,MAAM;AACf,qBAAgB;AAAA,IAClB,CAAE;;;;;;;;;;;;;;;;;;;;AC9EF,GAAG,WAAW,eAAe;"}