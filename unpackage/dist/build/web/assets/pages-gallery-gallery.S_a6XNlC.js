import{r as a,s as e,u as s,c as t,w as o,v as l,e as n,o as r,b as i,l as u,y as c,F as m,d as p,x as d,f as v}from"./index-CzxlOnnV.js";import{g as f,I as y}from"./photoLibrary.CjJiu_dV.js";import{C as g}from"./ClassifyMeun.DMkw2f3D.js";import{_}from"./lodash.DsPGAem2.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./_commonjsHelpers.DiAMJNXd.js";import"./uni-icons.DHrBPC_q.js";import"./request.BCiXkOZl.js";const b=h({__name:"gallery",setup(h){const b=a([]),j=a([]),k=a(!1),x=e([{name:"全部",number:0}]),C=()=>{b.value=j.value.slice(0,b.value.length+6)},D=a=>{console.log(a);const e=_.cloneDeep(j.value);console.log(e);const s=e.filter((e=>e.category===a));"全部"===a?(k.value=!1,b.value=e.slice(0,6)):(k.value=!0,b.value=s)};return s((()=>{(async()=>{const a=(await f({})).data;if(200==a.code){j.value=_.cloneDeep(a.data.list),b.value=a.data.list,x[0].number=a.data.pagination.total;for(const e in a.data.stats.categories)x.push({name:e,number:a.data.stats.categories[e]})}else l({title:"网络错误",icon:"none"})})()})),(a,e)=>{const s=n,l=d,f=v;return r(),t(s,{class:"photo-box"},{default:o((()=>[i(g,{classify:x,onClassifyEmit:D},null,8,["classify"]),(r(!0),u(m,null,c(b.value,((a,e)=>(r(),t(s,{key:e},{default:o((()=>[i(y,{photosData:a},null,8,["photosData"])])),_:2},1024)))),128)),k.value?(r(),u("div",{key:1,class:"more-btn"})):(r(),u("div",{key:0,class:"more-btn"},[b.value.length<j.value.length?(r(),t(l,{key:0,class:"more-button",type:"primary",onClick:C},{default:o((()=>[p(" 加载更多 ")])),_:1})):(r(),t(f,{key:1,class:"no-more-textg"},{default:o((()=>[p(" 没有更多了 ")])),_:1}))]))])),_:1})}}},[["__scopeId","data-v-8935a627"]]);export{b as default};
